<VirtualHost *:80>
    ServerName api-cui.boringtasktools.com
    Redirect permanent / https://api-cui.boringtasktools.com/
</VirtualHost>

<VirtualHost *:443>
    ServerName api-cui.boringtasktools.com
    
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/api-cui.boringtasktools.com/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/api-cui.boringtasktools.com/privkey.pem
    Include /etc/letsencrypt/options-ssl-apache.conf

    ProxyPreserveHost On
    ProxyPass / http://localhost:3000/
    ProxyPassReverse / http://localhost:3000/

    Header always set Strict-Transport-Security "max-age=63072000"
    Header always set X-Content-Type-Options "nosniff"
    
    ErrorLog ${APACHE_LOG_DIR}/api-cui_error.log
    CustomLog ${APACHE_LOG_DIR}/api-cui_access.log combined
</VirtualHost>
